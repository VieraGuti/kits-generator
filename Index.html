<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Kits</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0e7d1;
            color: #5d3a29;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #d77b00;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        select, input {
            width: 100%;
            padding: 8px;
            margin-bottom: 20px;
            border: 1px solid #d77b00;
            border-radius: 5px;
        }
        button {
            background-color: #d77b00;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #c56e00;
        }
        .kit-list {
            margin-top: 20px;
        }
        .kit-item {
            border: 1px solid #d77b00;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            background-color: #ffe0b5;
        }
        .kit-actions {
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>Generador de Kits</h1>

    <label for="language">Selecciona idioma:</label>
    <select id="language" onchange="changeLanguage()">
        <option value="es">Español</option>
        <option value="en">English</option>
    </select>

    <label for="kit_name">Escribe nombre del kit o selecciona uno de Kaosbot:</label>
    <select id="kit_name">
        <option value="Freekit">Freekit</option>
        <option value="Freekit2">Freekit2</option>
        <option value="Vipkit">Vipkit</option>
        <option value="Elitekit1">Elitekit1</option>
        <option value="Elitekit2">Elitekit2</option>
        <option value="Elitekit3">Elitekit3</option>
        <option value="Elitekit4">Elitekit4</option>
        <option value="Elitekit5">Elitekit5</option>
        <option value="Elitekit6">Elitekit6</option>
        <option value="Elitekit7">Elitekit7</option>
        <option value="Elitekit8">Elitekit8</option>
        <option value="Elitekit9">Elitekit9</option>
        <option value="Elitekit10">Elitekit10</option>
        <option value="Elitekit11">Elitekit11</option>
        <option value="Elitekit12">Elitekit12</option>
        <option value="Elitekit13">Elitekit13</option>
        <option value="Elitekit14">Elitekit14</option>
        <option value="Elitekit15">Elitekit15</option>
        <option value="Elitekit16">Elitekit16</option>
        <option value="Elitekit17">Elitekit17</option>
        <option value="Elitekit18">Elitekit18</option>
        <option value="Elitekit19">Elitekit19</option>
        <option value="Elitekit20">Elitekit20</option>
        <option value="Elitekit21">Elitekit21</option>
        <option value="Elitekit22">Elitekit22</option>
    </select>

    <label for="item_category">Seleccionar categoría:</label>
    <select id="item_category" onchange="updateItems()">
        <option value="all">Todas</option>
        <option value="ammo">Munición</option>
        <option value="weapons">Armas</option>
        <option value="armor">Armadura</option>
        <option value="food">Comida</option>
        <!-- Agrega más categorías según sea necesario -->
    </select>

    <label for="item_list">Seleccionar ítem:</label>
    <select id="item_list">
        <option value="none">Seleccione un ítem</option>
        <!-- Aquí se añadirán dinámicamente las opciones -->
    </select>

    <label for="quantity">Cantidad:</label>
    <input type="number" id="quantity" value="1" min="1">

    <label for="location">Ubicación:</label>
    <select id="location">
        <option value="main">Inventario</option>
        <option value="wear">Equipado</option>
        <option value="belt">Cinturón</option>
    </select>

    <button onclick="addKit()">Agregar Kit</button>

    <div class="kit-list" id="kit_list">
        <h2>Lista de Kits:</h2>
        <!-- Aquí se mostrarán los kits creados -->
    </div>

    <script src="Items.js"></script> <!-- Asegúrate de que el archivo Items.js esté disponible -->
    <script>
        const commands = {}; // Almacena los kits creados

        // Inicializa la lista de ítems
        function updateItems() {
            const category = document.getElementById('item_category').value;
            const itemList = document.getElementById('item_list');
            itemList.innerHTML = '<option value="none">Seleccione un ítem</option>'; // Limpiar opciones

            items.forEach(item => {
                if (category === 'all' || item.category === category) {
                    const option = document.createElement('option');
                    option.value = item.id;
                    option.textContent = item.name;
                    itemList.appendChild(option);
                }
            });
        }

        // Agregar kit
        function addKit() {
            const kitName = document.getElementById('kit_name').value;
            const itemId = document.getElementById('item_list').value;
            const quantity = document.getElementById('quantity').value;
            const location = document.getElementById('location').value;

            if (itemId !== 'none') {
                const command = `kit add "${kitName}" "${itemId}" ${quantity} 1 "${location}"`;
                if (!commands[kitName]) {
                    commands[kitName] = [];
                }
                commands[kitName].push(command);
                displayKits();
            } else {
                alert('Por favor, selecciona un ítem.');
            }
        }

        // Mostrar kits
        function displayKits() {
            const kitListDiv = document.getElementById('kit_list');
            kitListDiv.innerHTML = '<h2>Lista de Kits:</h2>'; // Reiniciar lista

            for (const kitName in commands) {
                const kitItem = document.createElement('div');
                kitItem.className = 'kit-item';
                kitItem.innerHTML = `
                    <strong>${kitName}</strong>: ${commands[kitName].join('<br>')}
                    <div class="kit-actions">
                        <button onclick="editKit('${kitName}')">Editar</button>
                        <button onclick="copyKit('${kitName}')">Copiar</button>
                        <button onclick="deleteKit('${kitName}')">Eliminar</button>
                        <button onclick="showInfo('${kitName}')">(+info)</button>
                    </div>
                `;
                kitListDiv.appendChild(kitItem);
            }
        }

        // Editar kit
        function editKit(kitName) {
            const newCmd = prompt(`Edita el comando del kit:\n${commands[kitName].join('\n')}`);
            if (newCmd) {
                commands[kitName] = newCmd.split('\n');
                displayKits();
            }
        }

        // Copiar kit
        function copyKit(kitName) {
            const newKitName = prompt("Nombre para el nuevo kit (copia de " + kitName + "):", kitName + "_copia");
            if (newKitName) {
                commands[newKitName] = [...commands[kitName]];
                displayKits();
            }
        }

        // Eliminar kit
        function deleteKit(kitName) {
            if (confirm(`¿Estás seguro de que deseas eliminar el kit "${kitName}"?`)) {
                delete commands[kitName];
                displayKits();
            }
        }

        // Mostrar información del kit
        function showInfo(kitName) {
            const itemCounts = {};
            commands[kitName].forEach(cmd => {
                const parts = cmd.split('"');
                const itemId = parts[3]; // ID del ítem
                const location = parts[4]; // Ubicación
                const quantity = parseInt(parts[2], 10); // Cantidad

                            // Mostrar información del kit
            function showInfo(kitName) {
                const itemCounts = {};
                commands[kitName].forEach(cmd => {
                    const parts = cmd.split('"');
                    const itemId = parts[3]; // ID del ítem
                    const location = parts[4]; // Ubicación
                    const quantity = parseInt(parts[2], 10); // Cantidad

                    // Contar los ítems
                    if (!itemCounts[itemId]) {
                        itemCounts[itemId] = { quantity: 0, location: location };
                    }
                    itemCounts[itemId].quantity += quantity;
                });

                // Formatear la información
                let infoText = `<strong>Información del Kit: ${kitName}</strong><br>`;
                for (const item in itemCounts) {
                    const locationText = itemCounts[item].location === 'wear' ? 'Equipado' :
                                         itemCounts[item].location === 'belt' ? 'Cinturón' : 
                                         'Inventario';

                    // Buscar el nombre del ítem usando Items.js
                    const itemData = items.find(i => i.id === item);
                    const itemName = itemData ? itemData.name : 'Desconocido';

                    infoText += `${itemName} (Cantidad: ${itemCounts[item].quantity}, Ubicación: ${locationText})<br>`;
                }

                // Mostrar la información en un cuadro de alerta o en el DOM
                const infoDiv = document.createElement('div');
                infoDiv.innerHTML = infoText;
                infoDiv.style.border = '1px solid #d77b00';
                infoDiv.style.padding = '10px';
                infoDiv.style.marginTop = '10px';
                infoDiv.style.backgroundColor = '#ffe0b5';

                // Agregar la información al final de la lista de kits
                const kitListDiv = document.getElementById('kit_list');
                kitListDiv.appendChild(infoDiv);
            }

        // Función para cambiar idioma (placeholder)
        function changeLanguage() {
            const language = document.getElementById('language').value;
            // Aquí puedes implementar el cambio de idioma
            alert(`Idioma cambiado a ${language}`);
        }
    </script>
</body>
</html>
