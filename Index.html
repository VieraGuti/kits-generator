<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kits Generator - Rust Style</title>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">
    <style>
    body {
    font-family: 'Russo One', sans-serif;
    background-color: #1e1e1e;
    color: #fff;
    margin: 0;
    padding: 20px;
}

h3 {
    text-align: center;
    color: #FF4500;
    text-shadow: 1px 1px 2px #000;
    margin-top: 20px;
}

label {
    display: block;
    margin: 10px 0 5px;
}

input, select, button {
    width: 100%;
    padding: 10px;
    margin: 5px 0 10px;
    border: none;
    border-radius: 5px;
    background-color: #333;
    color: #fff;
    font-size: 1em;
}

button {
    background-color: #FF4500;
    color: white;
    cursor: pointer;
}

button:hover {
    background-color: #E53E00;
}

.main-slots {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 20px;
    border: 2px solid #FF4500; 
    padding: 10px;
    border-radius: 10px;
    background-color: #1e1e1e; 
    box-shadow: 0 0 10px rgba(255, 69, 0, 0.5); 
}

.slot-container {
    display: flex;
    flex-wrap: wrap; /* Permite que los elementos se ajusten en filas */
    max-width: 330px; /* 6 slots de 50px + márgenes */
    margin: 10px 0; /* Espacio entre secciones */
    justify-content: center; /* Centra los elementos en el contenedor */
}

.small-slot, .main-slot {
    width: 50px; /* Tamaño de cada slot */
    height: 50px; /* Tamaño de cada slot */
    border: 1px solid #FF4500; 
    margin: 5px; /* Espacio entre slots */
    background-color: #222; 
    position: relative;
    text-align: center;
    line-height: 50px; /* Para centrar el texto verticalmente */
    border-radius: 5px; 
    transition: background-color 0.3s; 
}

.main-slot:empty::before {
    content: ' '; 
    background-color: rgba(255, 69, 0, 0.2); 
    width: 100%;
    height: 100%;
    border-radius: 5px;
    position: absolute;
    top: 0;
    left: 0;
}

.main-slot:hover {
    background-color: #333; 
}


.main-slot:empty::before {
    content: ' '; 
    background-color: rgba(255, 69, 0, 0.2); 
    width: 100%;
    height: 100%;
    border-radius: 5px;
    position: absolute;
    top: 0;
    left: 0;
}

.main-slot img {
    max-width: 100%; 
    max-height: 100%;
    border-radius: 5px;
}

.image-container {
    display: flex;
    flex-wrap: wrap;
    margin-top: 10px;
}

.image-item {
    margin: 5px;
    text-align: center;
}

.image-item img {
    width: 80px;
    cursor: pointer;
    border: 1px solid #FF4500;
    border-radius: 5px;
}

#command_list {
    margin-top: 20px;
    padding: 10px;
    background-color: #292929;
    border: 2px solid #FF4500;
    border-radius: 10px;
}

footer {
    text-align: center;
    color: #EAEAEA;
    font-size: 0.8em;
    margin-top: 40px;
}

</style>

</head>
<body>
    <h1>Kits Generator</h1>

    <label for="kitName">Name of kit :</label>
    <input type="text" id="kitName" placeholder="Escribe el nombre del kit">

    <label for="kaosList">Select kit name:</label>
    <select id="kaosList">
        <option value="">-- Or choose it from KAOSBOT format --</option>
                <option value="freekit">freekit</option>
        <option value="freekit2">freekit2</option>
        <option value="vipkit">vipkit</option>
        <option value="elitekit">elitekit</option>
        <option value="elitekit1">elitekit1</option>
        <option value="elitekit2">elitekit2</option>
        <option value="elitekit3">elitekit3</option>
        <option value="elitekit4">elitekit4</option>
        <option value="elitekit5">elitekit5</option>
        <option value="elitekit6">elitekit6</option>
        <option value="elitekit7">elitekit7</option>
        <option value="elitekit8">elitekit8</option>
        <option value="elitekit9">elitekit9</option>
        <option value="elitekit10">elitekit10</option>
        <option value="elitekit11">elitekit11</option>
        <option value="elitekit12">elitekit12</option>
        <option value="elitekit13">elitekit13</option>
        <option value="elitekit14">elitekit14</option>
        <option value="elitekit15">elitekit15</option>
        <option value="elitekit16">elitekit16</option>
        <option value="elitekit17">elitekit17</option>
        <option value="elitekit18">elitekit18</option>
        <option value="elitekit19">elitekit19</option>
        <option value="elitekit20">elitekit20</option>
        <option value="elitekit21">elitekit21</option>
        <option value="elitekit22">elitekit22</option>
        <option value="elitekit23">elitekit23</option>
        <option value="elitekit24">elitekit24</option>
        <option value="elitekit25">elitekit25</option>
        <option value="elitekit26">elitekit26</option>
        <option value="elitekit27">elitekit27</option>
        <option value="elitekit28">elitekit28</option>
        <option value="elitekit29">elitekit29</option>
        <option value="elitekit30">elitekit30</option>
        <option value="elitekit31">elitekit31</option>
        <option value="elitekit32">elitekit32</option>
        <option value="elitekit33">elitekit33</option>
        <option value="elitekit34">elitekit34</option>
        <option value="elitekit35">elitekit35</option>
        <option value="elitekit36">elitekit36</option>
        <option value="elitekit37">elitekit37</option>
        <option value="elitekit38">elitekit38</option>
        <option value="elitekit39">elitekit39</option>
        <option value="elitekit40">elitekit40</option>
        <option value="elitekit41">elitekit41</option>
        <option value="elitekit42">elitekit42</option>
        <option value="elitekit43">elitekit43</option>
        <option value="elitekit44">elitekit44</option>
    </select>
    

    <label for="category">Select category:</label>
    <select id="category">
        <option value="">-- Choose a category --</option>
        
    </select>
    <div class="main-slots">
    <h3>Wear</h3>
    <div class="slot-container">
        <div class="small-slot" data-type="wear"></div>
        <div class="small-slot" data-type="wear"></div>
        <div class="small-slot" data-type="wear"></div>
        <div class="small-slot" data-type="wear"></div>
        <div class="small-slot" data-type="wear"></div>
        <div class="small-slot" data-type="wear"></div>
        <div class="small-slot" data-type="wear"></div>
    </div>

    <h3>Main</h3>
    <div class="slot-container">
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
   
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
       
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
       
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
        <div class="main-slot" data-type="main"></div>
    </div>

    <h3>Belt</h3>
    <div class="slot-container">
        <div class="main-slot" data-type="belt"></div>
        <div class="main-slot" data-type="belt"></div>
        <div class="main-slot" data-type="belt"></div>
        <div class="main-slot" data-type="belt"></div>
        <div class="main-slot" data-type="belt"></div>
        <div class="main-slot" data-type="belt"></div>
    </div>
</div>
    <label for="itemQuantity">Quantity:</label>
    <input type="number" id="itemQuantity" value="1" min="1" />

    <div class="image-container" id="itemGallery"></div>
    
    <button id="finalizeKit">Finish Kit</button>
    <button id="copyCommands">Copy kit commands</button>
    <button id="newKit">New Kit</button>
    <div id="command_list"></div>

    <script src="Items.js"></script>
<script>
    window.onload = function() {
        console.log(items); // Verifica que todos los elementos se carguen correctamente
        loadCategories();
    };

    function loadCategories() {
        const categorySelect = document.getElementById('category');
        Object.keys(items).forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categorySelect.appendChild(option);
        });
    }

    document.getElementById('category').addEventListener('change', (event) => {
        const category = event.target.value;
        const itemGallery = document.getElementById('itemGallery');
        itemGallery.innerHTML = '';

        if (category && items[category]) {
            items[category].forEach(item => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';

                const img = document.createElement('img');
                img.src = `images/${item.id}.png`;
                img.alt = item.name;
                img.draggable = true;

                // Manejo del arrastre para PC
                img.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify({ id: item.id, name: item.name, category: category }));
                });

                // Manejo del toque para móviles
                img.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    img.style.position = 'absolute';
                    img.style.left = `${touch.clientX - 50}px`;
                    img.style.top = `${touch.clientY - 50}px`;

                    const onTouchMove = (moveEvent) => {
                        moveEvent.preventDefault();
                        img.style.left = `${moveEvent.touches[0].clientX - 50}px`;
                        img.style.top = `${moveEvent.touches[0].clientY - 50}px`;
                    };

                    const onTouchEnd = (endEvent) => {
                        // Manejo de la soltura en un slot
                        slots.forEach(slot => {
                            const slotRect = slot.getBoundingClientRect();
                            const touch = endEvent.changedTouches[0];
                            if (
                                touch.clientX >= slotRect.left &&
                                touch.clientX <= slotRect.right &&
                                touch.clientY >= slotRect.top &&
                                touch.clientY <= slotRect.bottom
                            ) {
                                // Si se suelta en un slot
                                const quantity = document.getElementById('itemQuantity').value;

                                // Verificar tipo de slot antes de añadir
                                if (slot.dataset.type === 'wear' && category !== 'Attire') {
                                    console.log('Este item no es de la categoría "Attire" y no se puede aplicar aquí.');
                                    return; // No hacer nada si no es de la categoría "Attire"
                                }

                                // Crear el contenedor para la imagen y la cantidad
                                const itemContainer = document.createElement('div');
                                itemContainer.style.position = 'relative';
                                itemContainer.style.width = '100%';
                                itemContainer.style.height = '100%';

                                // Crear la imagen
                                const imgSlot = document.createElement('img');
                                imgSlot.src = `images/${item.id}.png`;
                                imgSlot.style.width = '100%'; // Adaptar al tamaño del slot
                                imgSlot.style.height = '100%'; // Adaptar al tamaño del slot

                                // Crear el elemento para la cantidad
                                const quantityElement = document.createElement('span');
                                quantityElement.style.position = 'absolute';
                                quantityElement.style.bottom = '5px';
                                quantityElement.style.right = '5px';
                                quantityElement.style.color = 'white';
                                quantityElement.style.fontSize = '12px';
                                quantityElement.style.backgroundColor = 'transparent'; // Sin fondo

                                // Mostrar cantidad con "x" si es mayor a 1
                                if (quantity > 1) {
                                    quantityElement.textContent = `x${quantity}`;
                                }

                                // Añadir la imagen y la cantidad al contenedor
                                itemContainer.appendChild(imgSlot);
                                itemContainer.appendChild(quantityElement);

                                // Limpiar slot y añadir el contenedor
                                slot.innerHTML = '';
                                slot.appendChild(itemContainer);

                                slot.dataset.id = item.id;
                                slot.dataset.quantity = quantity;
                                slot.dataset.type = slot.dataset.type;
                            }
                        });

                        // Resetear estilo
                        img.style.position = '';
                        img.style.left = '';
                        img.style.top = '';

                        document.removeEventListener('touchmove', onTouchMove);
                        document.removeEventListener('touchend', onTouchEnd);
                    };

                    document.addEventListener('touchmove', onTouchMove);
                    document.addEventListener('touchend', onTouchEnd);
                });

                imageItem.appendChild(img);
                itemGallery.appendChild(imageItem);
            });
        }
    });

    const slots = document.querySelectorAll('.main-slot, .small-slot');
    slots.forEach(slot => {
        slot.addEventListener('dragover', (e) => {
            e.preventDefault();
        });

        slot.addEventListener('drop', (e) => {
            e.preventDefault();
            const data = JSON.parse(e.dataTransfer.getData('text/plain'));
            const quantity = document.getElementById('itemQuantity').value;

            // Permitir "Attire" en "Wear"
            if (slot.dataset.type === 'wear' && data.category !== 'attire') {
                console.log('Este item no es de la categoría "Attire" y no se puede aplicar aquí.');
                return; // No hacer nada si no es de la categoría "Attire"
            }

            // Crear el contenedor para la imagen y la cantidad
            const itemContainer = document.createElement('div');
            itemContainer.style.position = 'relative';
            itemContainer.style.width = '100%';
            itemContainer.style.height = '100%';

            // Crear la imagen
            const img = document.createElement('img');
            img.src = `images/${data.id}.png`;
            img.style.width = '100%'; // Adaptar al tamaño del slot
            img.style.height = '100%'; // Adaptar al tamaño del slot

            // Crear el elemento para la cantidad
            const quantityElement = document.createElement('span');
            quantityElement.style.position = 'absolute';
            quantityElement.style.bottom = '5px';
            quantityElement.style.right = '5px';
            quantityElement.style.color = 'white';
            quantityElement.style.fontSize = '12px';
            quantityElement.style.backgroundColor = 'transparent'; // Sin fondo

            // Mostrar cantidad con "x" si es mayor a 1
            if (quantity > 1) {
                quantityElement.textContent = `x${quantity}`;
            }

            // Añadir la imagen y la cantidad al contenedor
            itemContainer.appendChild(img);
            itemContainer.appendChild(quantityElement);

            // Limpiar slot y añadir el contenedor
            slot.innerHTML = '';
            slot.appendChild(itemContainer);

            slot.dataset.id = data.id;
            slot.dataset.quantity = quantity;
            slot.dataset.type = slot.dataset.type; // Asegúrate de que el tipo se guarda correctamente
        });
    });

    document.getElementById('finalizeKit').addEventListener('click', () => {
        const commands = [];
        const kitName = document.getElementById('kitName').value || document.getElementById('kaosList').value;
        slots.forEach(slot => {
            if (slot.dataset.id) {
                const itemId = slot.dataset.id;
                const quantity = slot.dataset.quantity;
                const itemType = slot.dataset.type; // Asegúrate de que el tipo se guarda correctamente
                commands.push(`kit add ${kitName} ${itemId} ${quantity} 1 ${itemType}`);
            }
        });
        document.getElementById('command_list').innerText = commands.join('\n');
    });

    document.getElementById('copyCommands').addEventListener('click', () => {
        const commandList = document.getElementById('command_list');
        navigator.clipboard.writeText(commandList.innerText).then(() => {
            alert('Comandos copiados al portapapeles!');
        }).catch(err => {
            console.error('Error al copiar: ', err);
        });
    });

    document.getElementById('newKit').addEventListener('click', () => {
        document.getElementById('kitName').value = '';
        document.getElementById('kaosList').value = '';
        document.getElementById('category').value = '';
        slots.forEach(slot => {
            slot.innerHTML = '';
            delete slot.dataset.id;
            delete slot.dataset.quantity;
            delete slot.dataset.type;
        });
        document.getElementById('command_list').innerText = '';
        document.getElementById('itemQuantity').value = 1; // Resetear cantidad
    });
</script>


    <footer>
        <p>Hecho por VieraGuti</p>
    </footer>
</body>
</html>
