<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Kits</title>
    <style>
        body {
            font-family: 'Courier New', monospace; /* Cambia a una fuente de estilo "rust" */
            background-color: #282828;
            color: white;
        }
        .container {
            width: 80%;
            margin: 0 auto;
            padding: 20px;
            background-color: #333;
            border-radius: 10px;
        }
        h1 {
            color: #FF4500;
        }
        label {
            display: block;
            margin-top: 10px;
            margin-bottom: 5px;
        }
        select, input[type="text"], input[type="number"], button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
        button {
            background-color: #FF4500;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #FF5722;
        }
        .kit-list {
            margin-top: 20px;
            padding: 10px;
            background-color: #222;
            border-radius: 5px;
        }
        .kit-item {
            padding: 10px;
            border-bottom: 1px solid #444;
        }
        .kit-actions button {
            width: auto;
            display: inline-block;
            margin-right: 10px;
        }
        .info-modal {
            background-color: #444;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            display: none; /* Ocultar por defecto */
        }
        .info-modal.visible {
            display: block; /* Mostrar cuando sea necesario */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Generador de Kits</h1>

        <!-- Nombre del kit (escribible o seleccionable de kaosbot) -->
        <label for="kit_name">Escribe el nombre del kit o selecciona uno de kaosbot:</label>
        <input type="text" id="kit_name" placeholder="Escribe el nombre del kit">
        <select id="kaosbot_list" onchange="selectKaosbot()">
            <option value="">Selecciona un kit de kaosbot</option>
            <option value="freekit">freekit</option>
            <option value="freekit2">freekit2</option>
            <option value="vipkit">vipkit</option>
            <option value="elitekit1">elitekit1</option>
            <option value="elitekit2">elitekit2</option>
            <option value="elitekit3">elitekit3</option>
            <option value="elitekit4">elitekit4</option>
            <option value="elitekit5">elitekit5</option>
            <option value="elitekit6">elitekit6</option>
            <option value="elitekit7">elitekit7</option>
            <option value="elitekit8">elitekit8</option>
            <option value="elitekit9">elitekit9</option>
            <option value="elitekit10">elitekit10</option>
            <option value="elitekit11">elitekit11</option>
            <option value="elitekit12">elitekit12</option>
            <option value="elitekit13">elitekit13</option>
            <option value="elitekit14">elitekit14</option>
            <option value="elitekit15">elitekit15</option>
            <option value="elitekit16">elitekit16</option>
            <option value="elitekit17">elitekit17</option>
            <option value="elitekit18">elitekit18</option>
            <option value="elitekit19">elitekit19</option>
            <option value="elitekit20">elitekit20</option>
            <option value="elitekit21">elitekit21</option>
            <option value="elitekit22">elitekit22</option>
        </select>

        <!-- Selección de categoría -->
        <label for="category_list">Selecciona una categoría:</label>
        <select id="category_list" onchange="filterItemsByCategory()">
            <option value="">Selecciona una categoría</option>
            <option value="ammo">Ammo</option>
            <option value="weapons">Weapons</option>
            <option value="tools">Tools</option>
            <!-- Más categorías según Items.js -->
        </select>

        <!-- Selección de ítem -->
        <label for="item_list">Selecciona un ítem:</label>
        <select id="item_list">
            <option value="">Selecciona un ítem</option>
            <!-- Los ítems filtrados aparecerán aquí dinámicamente -->
        </select>

        <!-- Cantidad de ítem -->
        <label for="item_quantity">Cantidad:</label>
        <input type="number" id="item_quantity" value="1" min="1">

        <!-- Selección de ubicación -->
        <label for="location_list">Selecciona la ubicación del ítem:</label>
        <select id="location_list">
            <option value="main">Inventario</option>
            <option value="wear">Equipado</option>
            <option value="belt">Cinturón</option>
        </select>

        <!-- Botón para agregar ítem al kit -->
        <button onclick="addItemToKit()">Agregar ítem al kit</button>

        <!-- Mostrar la lista de kits generados -->
        <div class="kit-list" id="kit_list">
            <h2>Kits Generados</h2>
            <!-- Aquí se mostrarán los kits generados -->
        </div>
    </div>

    <script>
        const commands = {}; // Aquí almacenaremos los kits generados
        let items = {}; // Para almacenar los ítems disponibles (Items.js)

        // Cargar ítems de Items.js
        function loadItems() {
            // Simulamos la carga de ítems de Items.js
            items = {
                "ammo": ["rocket", "bullet", "grenade"],
                "weapons": ["ak47", "mp5", "crossbow"],
                "tools": ["hatchet", "pickaxe", "hammer"],
                // Agrega más categorías e ítems según sea necesario
            };
        }

        // Filtrar ítems por categoría seleccionada
        function filterItemsByCategory() {
            const category = document.getElementById('category_list').value;
            const itemList = document.getElementById('item_list');
            itemList.innerHTML = ''; // Limpiar ítems previos

            if (category && items[category]) {
                items[category].forEach(item => {
                    const option = document.createElement('option');
                    option.value = item;
                    option.textContent = item;
                    itemList.appendChild(option);
                });
            }
        }

        // Seleccionar nombre de kaosbot
        function selectKaosbot() {
            const kaosbotName = document.getElementById('kaosbot_list').value;
            if (kaosbotName) {
                document.getElementById('kit_name').value = kaosbotName;
            }
        }

        // Agregar ítem al kit
        function addItemToKit() {
            const kitName = document.getElementById('kit_name').value.trim();
            const item = document.getElementById('item_list').value;
            const quantity = document.getElementById('item_quantity').value;
            const location = document.getElementById('location_list').value;

            if (!kitName || !item) {
                alert("Debes seleccionar un ítem y escribir el nombre del kit.");
                return;
            }

            if (!commands[kitName]) {
                commands[kitName] = [];
            }

            // Formato del kit: kit add "nombredelkit" "item" "cantidad" "1" "location"
            const command = `kit add "${kitName}" "${item}" ${quantity} 1 "${location}"`;
            commands[kitName].push(command);

            displayKits();
        }

        // Mostrar los kits generados
        function displayKits() {
            const kitList = document.getElementById('kit_list');
            kitList.innerHTML = '<h2>Kits Generados</h2>';

            for (const kitName in commands) {
                const kitItem = document.createElement('div');
                kitItem.className = 'kit-item';
                kitItem.innerHTML = `
                    <strong>${kitName}</strong>: 
                    <div>${commands[kitName].join('<br>')}</div>
                    <div class="kit-actions">
                        <button onclick="showInfo('${kitName}')">(+info)</button>
                        <button onclick="editKit('${kitName}')">Editar</button>
                        <button onclick="copyKit('${kitName}')">Copiar</button>
                                                <button onclick="deleteKit('${kitName}')">Eliminar</button>
                    </div>
                    <div id="info-${kitName}" class="info-modal"></div>
                `;
                kitList.appendChild(kitItem);
            }
        }

        // Mostrar información detallada sobre el kit
        function showInfo(kitName) {
            const infoModal = document.getElementById(`info-${kitName}`);
            const itemDetails = commands[kitName];
            const itemCount = {};
            
            // Contar cantidad de ítems y su ubicación
            itemDetails.forEach(command => {
                const parts = command.match(/"([^"]+)" "([^"]+" \d+) \d+ "([^"]+)"/);
                if (parts) {
                    const item = parts[2];
                    const location = parts[3];
                    itemCount[item] = itemCount[item] || { count: 0, location: location };
                    itemCount[item].count += parseInt(parts[2].match(/\d+/)[0]);
                }
            });

            // Mostrar información
            let infoContent = `<strong>Detalles del Kit:</strong><br>`;
            for (const item in itemCount) {
                infoContent += `x${itemCount[item].count} ${item} en ${itemCount[item].location}<br>`;
            }
            infoModal.innerHTML = infoContent;
            infoModal.classList.toggle('visible');
        }

        // Editar kit seleccionado
        function editKit(kitName) {
            const newKitName = prompt("Introduce un nuevo nombre para el kit:", kitName);
            if (newKitName && newKitName !== kitName) {
                commands[newKitName] = commands[kitName];
                delete commands[kitName];
                displayKits();
            }
        }

        // Copiar kit seleccionado
        function copyKit(kitName) {
            const newKitName = prompt("Introduce un nuevo nombre para la copia del kit:", `${kitName} copia`);
            if (newKitName) {
                commands[newKitName] = [...commands[kitName]];
                displayKits();
            }
        }

        // Eliminar kit seleccionado
        function deleteKit(kitName) {
            if (confirm(`¿Estás seguro de que deseas eliminar el kit "${kitName}"?`)) {
                delete commands[kitName];
                displayKits();
            }
        }

        // Cargar ítems al iniciar la página
        window.onload = loadItems;
    </script>
</body>
</html>
