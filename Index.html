<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Kits</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #e8e8e8;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #e06a00; /* Color rust */
        }
        label, select, button {
            display: block;
            margin: 10px 0;
        }
        select {
            padding: 5px;
        }
        .kit-item {
            border: 1px solid #e06a00;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .kit-actions button {
            margin-right: 5px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Generador de Kits</h1>
    
    <label for="kit_name">Selecciona nombre de kit o elige uno de Kaosbot:</label>
    <select id="kit_name">
        <option value="none">Selecciona un nombre de kit</option>
        <option value="freekit">Freekit</option>
        <option value="freekit2">Freekit2</option>
        <option value="vipkit">Vipkit</option>
        <option value="elitekit1">Elitekit1</option>
        <option value="elitekit2">Elitekit2</option>
        <option value="elitekit3">Elitekit3</option>
        <option value="elitekit4">Elitekit4</option>
        <option value="elitekit5">Elitekit5</option>
        <option value="elitekit6">Elitekit6</option>
        <option value="elitekit7">Elitekit7</option>
        <option value="elitekit8">Elitekit8</option>
        <option value="elitekit9">Elitekit9</option>
        <option value="elitekit10">Elitekit10</option>
        <option value="elitekit11">Elitekit11</option>
        <option value="elitekit12">Elitekit12</option>
        <option value="elitekit13">Elitekit13</option>
        <option value="elitekit14">Elitekit14</option>
        <option value="elitekit15">Elitekit15</option>
        <option value="elitekit16">Elitekit16</option>
        <option value="elitekit17">Elitekit17</option>
        <option value="elitekit18">Elitekit18</option>
        <option value="elitekit19">Elitekit19</option>
        <option value="elitekit20">Elitekit20</option>
        <option value="elitekit21">Elitekit21</option>
        <option value="elitekit22">Elitekit22</option>
    </select>

    <label for="item_category">Seleccionar categoría de ítem:</label>
    <select id="item_category" onchange="updateItems()">
        <option value="none">Selecciona una categoría</option>
        <option value="ammo">Munición</option>
        <option value="weapons">Armas</option>
        <option value="armor">Armadura</option>
        <option value="food">Comida</option>
        <option value="crafting">Creación</option>
        <option value="materials">Materiales</option>
        <option value="tools">Herramientas</option>
        <option value="clothes">Ropa</option>
        <option value="building">Construcción</option>
        <option value="explosives">Explosivos</option>
    </select>

    <label for="item_list">Seleccionar ítem:</label>
    <select id="item_list">
        <option value="none">Seleccione un ítem</option>
        <!-- Aquí se añadirán dinámicamente las opciones -->
    </select>

    <label for="quantity">Cantidad:</label>
    <input type="number" id="quantity" value="1" min="1">

    <label for="location">Ubicación:</label>
    <select id="location">
        <option value="main">Inventario</option>
        <option value="wear">Equipado</option>
        <option value="belt">Cinturón</option>
    </select>

    <button onclick="addKit()">Agregar Kit</button>
    
    <h2>Lista de Kits</h2>
    <div id="kit_list"></div>
</div>

<script src="Items.js"></script>
<script>
    const commands = {};

    function updateItems() {
        const category = document.getElementById('item_category').value;
        const itemList = document.getElementById('item_list');
        itemList.innerHTML = '<option value="none">Seleccione un ítem</option>';
        items.forEach(item => {
            if (item.category === category) {
                const option = document.createElement('option');
                option.value = item.id;
                option.textContent = item.name;
                itemList.appendChild(option);
            }
        });
    }

    function addKit() {
        const kitName = document.getElementById('kit_name').value;
        const itemId = document.getElementById('item_list').value;
        const quantity = document.getElementById('quantity').value;
        const location = document.getElementById('location').value;

        if (kitName === "none" || itemId === "none") {
            alert("Por favor, selecciona un nombre de kit y un ítem.");
            return;
        }

        const command = `kit add "${kitName}" "${itemId}" ${quantity} 1 "${location}"`;
        if (!commands[kitName]) {
            commands[kitName] = [];
        }
        commands[kitName].push(command);
        updateKitList();
    }

    function updateKitList() {
        const kitListDiv = document.getElementById('kit_list');
        kitListDiv.innerHTML = ''; // Limpiar la lista
        for (const kitName in commands) {
            const kitItem = document.createElement('div');
            kitItem.className = 'kit-item';
            kitItem.innerHTML = `
                <strong>${kitName}</strong>: ${commands[kitName].join('<br>')}
                <div class="kit-actions">
                    <button onclick="editKit('${kitName}')">Editar</button>
                    <button onclick="copyKit('${kitName}')">Copiar</button>
                    <button onclick="removeKit('${kitName}')">Eliminar</button>
                    <button onclick="showKitInfo('${kitName}')">(+info)</button>
                </div>
            `;
            kitListDiv.appendChild(kitItem);
        }
    }

    function showKitInfo(kitName) {
        const itemCounts = {};
        commands[kitName].forEach(cmd => {
            const parts = cmd.split('"');
            const itemName = parts[3]; // Nombre del ítem
            const location = parts[4]; // Ubicación
            const quantity = parts[2]; // Cantidad

            if (!itemCounts[itemName]) {
                itemCounts[itemName] = { count: 0, location: location };
            }
            itemCounts[itemName].count += parseInt(quantity);
        });

        let info = `Información del kit "${kitName}":<br>`;
        for (const item in itemCounts) {
            const locationText = itemCounts[item].location === 'wear' ? 'Equipado' :
                                 itemCounts[item].location === 'belt' ? 'Cinturón' : 
                                 'Inventario';
            info += `x${itemCounts[item].count} ${item} en ${locationText}<br>`;
        }

        // Mostrar la información en un alert o en un modal, dependiendo de la preferencia
        alert(info);
    }

    function editKit(kitName) {
        const kitCommands = commands[kitName];
        const newCommands = prompt("Edita los comandos del kit:\n" + kitCommands.join("\n"));
        if (newCommands) {
            commands[kitName] = newCommands.split('\n').map(cmd => cmd.trim());
            updateKitList();
        }
    }

    function copyKit(kitName) {
        const newKitName = prompt("Nombre para el nuevo kit (copia de " + kitName + "):", kitName + "_copia");
        if (newKitName) {
                        commands[newKitName] = [...commands[kitName]];
            updateKitList();
        }
    }

    function removeKit(kitName) {
        const confirmation = confirm(`¿Estás seguro de que deseas eliminar el kit "${kitName}"?`);
        if (confirmation) {
            delete commands[kitName];
            updateKitList();
        }
    }
</script>

</body>
</html>
