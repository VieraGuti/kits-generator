<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Kits - Rust Style</title>
    <style>
        body {
            background-color: #2b2b2b;
            color: white;
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1b1b1b;
            border-radius: 8px;
        }
        h1 {
            color: #ff4500; /* Naranja estilo Rust */
        }
        label {
            display: block;
            margin-top: 15px;
        }
        select, input, button {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #555;
            border-radius: 4px;
            background-color: #333;
            color: white;
        }
        .kit-list {
            margin-top: 20px;
        }
        .kit-item {
            padding: 10px;
            border: 1px solid #555;
            margin-bottom: 10px;
            background-color: #3b3b3b;
        }
        .kit-actions button {
            margin-right: 5px;
            background-color: #ff4500;
            border: none;
            cursor: pointer;
        }
        .info-button {
            color: #ff4500;
            cursor: pointer;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gestor de Kits - Estilo Rust</h1>

        <!-- Idioma -->
        <label for="language">Idioma / Language:</label>
        <select id="language" onchange="changeLanguage()">
            <option value="es">Español</option>
            <option value="en">English</option>
        </select>

        <!-- Selecciona nombre de kit o elige uno de Kaosbot -->
        <label for="kit_name" data-lang-es="Selecciona nombre de kit o elige uno de Kaosbot" data-lang-en="Select kit name or choose one from Kaosbot">Selecciona nombre de kit o elige uno de Kaosbot:</label>
        <input type="text" id="kit_name" placeholder="Escribe un nombre de kit o elige de Kaosbot">
        <select id="kaosbot_names" onchange="handleKaosbotSelection()">
            <option value="">Elige uno de Kaosbot / Choose one from Kaosbot</option>
            <option value="Freekit">Freekit</option>
            <option value="Freekit2">Freekit2</option>
            <option value="Vipkit">Vipkit</option>
            <option value="Elitekit1">Elitekit1</option>
            <option value="Elitekit2">Elitekit2</option>
            <option value="Elitekit3">Elitekit3</option>
            <option value="Elitekit4">Elitekit4</option>
            <option value="Elitekit5">Elitekit5</option>
            <option value="Elitekit6">Elitekit6</option>
            <option value="Elitekit7">Elitekit7</option>
            <option value="Elitekit8">Elitekit8</option>
            <option value="Elitekit9">Elitekit9</option>
            <option value="Elitekit10">Elitekit10</option>
            <option value="Elitekit11">Elitekit11</option>
            <option value="Elitekit12">Elitekit12</option>
            <option value="Elitekit13">Elitekit13</option>
            <option value="Elitekit14">Elitekit14</option>
            <option value="Elitekit15">Elitekit15</option>
            <option value="Elitekit16">Elitekit16</option>
            <option value="Elitekit17">Elitekit17</option>
            <option value="Elitekit18">Elitekit18</option>
            <option value="Elitekit19">Elitekit19</option>
            <option value="Elitekit20">Elitekit20</option>
            <option value="Elitekit21">Elitekit21</option>
            <option value="Elitekit22">Elitekit22</option>
        </select>

        <!-- Selección de ítem -->
        <label for="item_list" data-lang-es="Seleccionar ítem" data-lang-en="Select item">Seleccionar ítem:</label>
        <select id="item_list">
            <option value="none">Seleccione un ítem / Select an item</option>
            <!-- Aquí se añadirán dinámicamente las opciones de Items.js -->
            <!-- Ejemplo de ítems, reemplaza con los de tu archivo Items.js -->
            <option value="item1">Ítem 1</option>
            <option value="item2">Ítem 2</option>
            <option value="item3">Ítem 3</option>
            <option value="item4">Ítem 4</option>
            <option value="item5">Ítem 5</option>
            <!-- Agrega más ítems según sea necesario -->
        </select>

        <!-- Selección de ubicación (main, wear, belt) -->
        <label for="item_location" data-lang-es="Seleccionar ubicación" data-lang-en="Select location">Seleccionar ubicación:</label>
        <select id="item_location">
            <option value="main" data-lang-es="Inventario" data-lang-en="Main">Inventario (main)</option>
            <option value="wear" data-lang-es="Equipado" data-lang-en="Wear">Equipado (wear)</option>
            <option value="belt" data-lang-es="Cinturón" data-lang-en="Belt">Cinturón (belt)</option>
        </select>

        <!-- Botón para agregar kit -->
        <button data-lang-es="Agregar Kit" data-lang-en="Add Kit" onclick="addKit()">Agregar Kit</button>

        <!-- Lista de kits agregados -->
        <div class="kit-list" id="kit_list"></div>

    </div>

    <script>
        let language = "es"; // Idioma predeterminado
        let commands = {}; // Almacena los kits agrupados por nombre

        // Función para cambiar el idioma
        function changeLanguage() {
            language = document.getElementById('language').value;
            document.querySelectorAll('[data-lang-es], [data-lang-en]').forEach(el => {
                el.innerText = el.getAttribute(`data-lang-${language}`);
            });
        }

        // Manejar la selección de Kaosbot
        function handleKaosbotSelection() {
            const kaosbotName = document.getElementById('kaosbot_names').value;
            const kitNameInput = document.getElementById('kit_name');

            if (kaosbotName) {
                kitNameInput.value = kaosbotName;
            }
        }

        // Función para agregar kit
        function addKit() {
            const kitName = document.getElementById('kit_name').value.trim();
            const selectedItem = document.getElementById('item_list').value;
            const selectedLocation = document.getElementById('item_location').value;

            if (selectedItem === "none") {
                alert("Por favor, selecciona un ítem. / Please select an item.");
                return;
            }

            if (!kitName) {
                alert("Por favor, elige un nombre de kit o selecciona uno de Kaosbot. / Please choose a kit name or select one from Kaosbot.");
                return;
            }

            const kitCommand = `kit add "${kitName}" "${selectedItem}" 1 1 ${selectedLocation}`;

            if (!commands[kitName]) {
                commands[kitName] = [];
            }

            commands[kitName].push(kitCommand);
            updateKitList();
        }

        // Actualizar la lista de kits
        function updateKitList() {
            const kitListContainer = document.getElementById('kit_list');
            kitListContainer.innerHTML = ''; // Limpiar la lista

            Object.keys(commands).forEach(kitName => {
                const kitGroup = document.createElement('div');
                kitGroup.className = 'kit-item';

                let kitDetails = commands[kitName].join('<br>');

                kitGroup.innerHTML = `
                    <strong>${kitName}</strong><br>${kitDetails}
                    <div class="kit-actions">
                        <button onclick="editKit('${kitName}')">Editar / Edit</button>
                        <button onclick="copyKit('${kitName}')">Copiar / Copy</button>
                        <button onclick="removeKit('${kitName}')">Eliminar / Delete</button>
                        <span class="info-button" onclick="showKitInfo('${kitName}')">( +info )</span>
                    </div>
                `;
                kitListContainer.appendChild(kitGroup);
            });
        }

                // Mostrar información del kit
        function showKitInfo(kitName) {
            const kitCommands = commands[kitName];
            let info = `Información del Kit: ${kitName}<br>`;
            const itemCounts = {};

            // Contar los ítems y su ubicación
            kitCommands.forEach(command => {
                const parts = command.split('"');
                const itemName = parts[1]; // Nombre del ítem
                const location = parts[4]; // Ubicación

                if (!itemCounts[itemName]) {
                    itemCounts[itemName] = { count: 0, location: location };
                }
                itemCounts[itemName].count += 1;
            });

            // Formatear la información
            for (const item in itemCounts) {
                info += `Cantidad: ${itemCounts[item].count}, Ítem: "${item}", Ubicación: ${itemCounts[item].location}<br>`;
            }

            // Mostrar la información en una alerta o un modal
            alert(info);
        }

        // Función para editar un kit
        function editKit(kitName) {
            const newItem = prompt("Introduce el nuevo ítem para " + kitName + ":", "");
            if (newItem) {
                commands[kitName].push(`kit add "${kitName}" "${newItem}" 1 1 main`);
                updateKitList();
            }
        }

        // Función para copiar un kit
        function copyKit(kitName) {
            const newKitName = prompt("Introduce el nombre del nuevo kit:", kitName + "_copy");
            if (newKitName) {
                commands[newKitName] = [...commands[kitName]];
                updateKitList();
            }
        }

        // Función para eliminar un kit
        function removeKit(kitName) {
            if (confirm("¿Estás seguro de que quieres eliminar el kit " + kitName + "?")) {
                delete commands[kitName];
                updateKitList();
            }
        }
    </script>
</body>
</html>
